services:
  agent-tg:
    command: sh -c 'bin/wait && python -m deeppavlov_agent.run agent.channel=telegram agent.telegram_token=1718993692:AAFrw9kiL5e5OC5FQSrmz4nR8B3zKgQ7kvM agent.pipeline_config=assistant_dists/dream_russian_robot/pipeline_conf.json agent.db_config=assistant_dists/dream_russian_robot/db_conf.json'
    env_file: [.env]
    build:
      context: ./
      dockerfile: dockerfile_agent
    deploy:
      resources:
        limits:
          memory: 4G
        reservations:
          memory: 2G
    volumes:
      - ".:/dp-agent"

version: '3.7'